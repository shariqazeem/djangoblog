version: '3'

services:
  web:
    image: myapp
    container_name: django_container
    environment:
      - DJANGO_SETTINGS_MODULE=myproject.settings
      - DJANGO_SECRET_KEY='django-insecure-v0=%5snki&wa=c*khm0mvr74tzb%zt+u0cq8e4h1-@(tncz5#@'
      - DJANGO_DEBUG=False
    volumes:
      - ./myproject:/app/myproject  # Map local code to container
      - django_db_data:/app/myproject  # Persistent volume for SQLite database
    ports:
      - "8000:8000"
    command: ["gunicorn", "--bind", "0.0.0.0:8000", "myproject.wsgi:application"]

volumes:
  django_db_data:
